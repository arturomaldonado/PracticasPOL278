<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Pr√°ctica dirigida 2</title>

<script src="site_libs/header-attrs-2.20/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Pr√°cticas Estad√≠stica_1</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="intro.html">Introducci√≥n</a>
</li>
<li>
  <a href="basico.html">Procedimientos b√°sicos</a>
</li>
<li>
  <a href="pd1.html">Pr√°ctica 1</a>
</li>
<li>
  <a href="pd2.html">Pr√°ctica 2</a>
</li>
<li>
  <a href="pd3.html">Pr√°ctica 3</a>
</li>
<li>
  <a href="pd4.html">Pr√°ctica 4</a>
</li>
<li>
  <a href="pd5.html">Pr√°ctica 5</a>
</li>
<li>
  <a href="pd6.html">Pr√°ctica 6</a>
</li>
<li>
  <a href="pd7.html">Pr√°ctica 7</a>
</li>
<li>
  <a href="pd8.html">Pr√°ctica 8</a>
</li>
<li>
  <a href="pd9.html">Pr√°ctica 9</a>
</li>
<li>
  <a href="pd10.html">Pr√°ctica 10</a>
</li>
<li>
  <a href="pd11.html">Pr√°ctica 11</a>
</li>
<li>
  <a href="pd12.html">Pr√°ctica 12</a>
</li>
<li>
  <a href="pd13.html">Pr√°ctica 13</a>
</li>
<li>
  <a href="FAQ.html">FAQ</a>
</li>
<li>
  <a href="https://github.com/arturomaldonado/PracticasPOL278">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Pr√°ctica dirigida 2</h1>

</div>


<center>
<img src=" " width="200"/>
</center>
<p><img src="logoPUCP.png" width="30%" /></p>
<p><strong>FACULTAD DE CIENCIAS SOCIALES - PUCP</strong><br></p>
<div
id="curso-pol-278---estad√≠stica-para-el-an√°lisis-pol√≠tico-1-semestre-2024---2"
class="section level2">
<h2>Curso: POL 278 - Estad√≠stica para el an√°lisis pol√≠tico 1 | Semestre
2024 - 2 <br></h2>
<hr />
</div>
<div id="qu√©-es-el-an√°lisis-descriptivo" class="section level1">
<h1><strong>1.¬øQu√© es el an√°lisis descriptivo?</strong></h1>
<p><img src="pd2_QSAnalisisDesc.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="nivel-de-medida-de-una-variable" class="section level1">
<h1><strong>2.Nivel de medida de una variable</strong></h1>
<p><img src="pd2_medVar.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
<div id="importancia-de-visualizaci√≥n-de-datos" class="section level1">
<h1><strong>3.Importancia de visualizaci√≥n de datos</strong></h1>
<p>Debido al crecimiento de la big data en los √∫ltimos a√±os surgieron
nuevas necesidades para comprender los an√°lisis masivos de datos de una
forma simple y escalable. Es entonces cuando se dirige la atenci√≥n a
desarrollar nuevas t√©cnicas gr√°ficas en distintas plataformas (ejemplos
a continuaci√≥n), tanto softwares como librer√≠as de c√≥digo abierto<a
href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>, tal es el
caso de ggplot2 en R.</p>
<p><img src="pd2_herramientas.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Este inter√©s por desarrollar t√©cnicas de an√°lisis masivo de datos y
la comunicaci√≥n de resultados cada vez m√°s amigables y apta para todos
los p√∫blicos dio pie a nuevas especialidades dentro de la ciencia de
datos, como por ejemplo el data story telling</p>
<p><img src="pd2_datavis.png" width="90%" style="display: block; margin: auto;" /></p>
<div id="gr√°ficos-por-tipo-de-variables" class="section level3">
<h3><strong>Gr√°ficos por tipo de variables:</strong></h3>
<p><img src="pd2_GrafTipoVar.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="an√°lisis-descriptivo" class="section level1">
<h1><strong>4.An√°lisis descriptivo</strong></h1>
<style>
.custom-text {
  color: #00688B;
  font-family: Helvetica, sans-serif;
  text-align: center;
  font-weight: bold;
  font-size: 22px;
}
</style>
<div class="custom-text">
<p>¬øCu√°l es la percepci√≥n de desigualdad en el Per√∫ el 2024? ü§î</p>
</div>
<p>Para dar respuesta a la pregunta de investigaci√≥n que guiara la
pr√°ctica dirigida analizaremos algunas de las variables que forman parte
de la Encuesta Nacional de Percepci√≥n de Desigualdades - ENADES 2024,
que fue elaborada por Instituto de Estudios Peruanos (IEP) y Oxfam. La
encuesta busca ahondar en la percepci√≥n de las diferentes formas de
desigualdad en el Per√∫ e incorpora indicadores que permiten medir la
magnitud de brechas sociales y pol√≠ticas como g√©nero, clase, entre
otros.</p>
<p>Se eligieron algunas variables de la base de datos original y se
dejaron por fuera valores perdidos adem√°s de realizar otras
modificaciones. Para realizar alguna investigaci√≥n se debe usar la base
de datos original que se encuentra en el siguiente <a
href="https://peru.oxfam.org/ENADES-2024">link</a>.</p>
<p><img src="diccionario_enades2024.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="r"><code>library(rio) #Convocamos el paquete   
data=import(&quot;pd2_enades2024.xlsx&quot;)</code></pre>
<pre class="r"><code>str(data) #revisamos las variables</code></pre>
<pre><code>## &#39;data.frame&#39;:    562 obs. of  18 variables:
##  $ edad      : num  19 40 47 20 37 27 36 37 35 19 ...
##  $ sexo      : num  1 2 2 2 2 2 2 1 1 1 ...
##  $ macrozona : num  4 3 4 4 4 4 3 4 4 4 ...
##  $ P02       : num  7 7 10 10 6 4 8 1 1 3 ...
##  $ P07       : num  4 1 4 4 4 2 4 4 4 3 ...
##  $ P08       : num  1 3 1 1 1 1 2 3 1 1 ...
##  $ clase     : num  3 3 3 3 3 4 3 3 4 3 ...
##  $ P17       : num  4 2 4 3 1 3 2 1 3 3 ...
##  $ P18       : num  3 2 3 4 2 3 3 1 3 3 ...
##  $ P19       : num  4 4 4 4 4 4 3 4 3 4 ...
##  $ P20       : num  3 1 3 3 3 3 3 1 2 3 ...
##  $ P21       : num  3 2 3 3 1 1 2 1 2 3 ...
##  $ P22       : num  2 3 3 3 3 1 3 1 2 3 ...
##  $ d_educ    : num  2 3 2 1 2 1 3 1 3 2 ...
##  $ d_salud   : num  1 1 1 2 2 1 2 1 1 1 ...
##  $ d_trabajo : num  2 3 1 1 1 3 3 1 1 2 ...
##  $ d_justicia: num  2 1 2 1 2 1 2 1 1 2 ...
##  $ P37       : num  2 1 2 6 3 2 4 1 2 2 ...</code></pre>
<div
id="cu√°l-es-la-percepci√≥n-de-la-desigualdad-en-calidad-de-vida-en-el-per√∫"
class="section level2">
<h2>4.1 ¬øCu√°l es la percepci√≥n de la desigualdad en calidad de vida en
el Per√∫?</h2>
<div id="indicador-proxy" class="section level3">
<h3><strong>Indicador Proxy</strong></h3>
<p>TambieÃÅn llamado indicador indirecto, se usa ante la imposibilidad de
medir lo que efectivamente es de importancia. El indicador mide una
variable distinta a la que nos interesa de manera especiÃÅfica, pero
presenta una relacioÃÅn lo maÃÅs directa posible con el fenoÃÅmeno en
estudio.</p>
<p>Un indicador proxy es una medici√≥n o se√±al indirecto que aproxima o
representa un fen√≥meno en la ausencia de una medici√≥n o se√±al
directo.</p>
</div>
<div id="indicador-aditivo" class="section level3">
<h3><strong>Indicador Aditivo</strong></h3>
<p>Es una variable latente que se genera a trav√©s de la suma de un
conjunto de variables manifiestas u observables. Luego de la suma se
procede a aplicar una formula que genera que el valor m√°ximo de la
variable sea 1 y el m√≠nimo sea 0. A partir de eso se puede multiplicar
por cualquier n√∫mero para que el m√°ximo cambie. Es as√≠ que si se
multiplica por 10, el indicador ir√° de 0 a 10; si se desea que el
indicador sea de 0 a 50, se debe multiplicar por 50; etc.</p>
<p><img src="pd2_ejemplo.png" width="60%" style="display: block; margin: auto;" /></p>
<p>Sin embargo, el paquete scales nos facilita el uso del comando
<strong>rescale.</strong> Al usarlo solo necesitamos se√±alar los l√≠mites
del indicador.</p>
<div id="pasos-para-construir-un-indicador" class="section level4">
<h4>Pasos para construir un indicador:</h4>
<ol style="list-style-type: decimal">
<li>Verificar que las variables que construyan el indicador correspondan
al concepto que se desea medir. <em>Ejemplo: Si deseo mejor Satisfacci√≥n
del Usuario, las preguntas deben ser sobre ello.</em></li>
<li>Revisar el cuestionario e identificar el sentido de las categor√≠as.
<em>Ejemplo: El valor 5 es ‚ÄúMuy instafisfecho‚Äù y 1 ‚ÄúMuy
satisfecho‚Äù</em></li>
<li>Si las categor√≠as de las variables est√°n en el correcto sentido
proceder a sumarlas, si no lo est√°n, proceder a recodificarlas para
luego sumar.</li>
<li>Una vez realizada la suma, identificar el m√≠nimo y el m√°ximo.</li>
<li>Aplicar la funci√≥n <strong>rescale</strong> (paquete scales) con el
rango espec√≠fico.</li>
</ol>
<p>Construiremos un indicador aditivos de percepci√≥n de desigualdad en
calidad de vida en el Per√∫, que vaya del 0 al 100. Para ello usaremos a
las variables <code>d_educ</code>, <code>d_salud</code>,
<code>d_trabajo</code> y <code>d_justicia</code>.</p>
<p><img src="tablitaenades2024.png" width="100%" style="display: block; margin: auto;" /></p>
<p>El indicador que queremos crear es de percepci√≥n de desigualdad, por
tanto mayor valor deber√≠a significar mayor desigualdad. En este caso, un
mayor valor quiere decir menos desigualdad. Debemos cambiarlo.</p>
<pre class="r"><code>library(dplyr)
data &lt;- data %&gt;%
  mutate(d_educ = case_when( d_educ == 1 ~ 4,
                            d_educ == 2 ~ 3,
                            d_educ == 3 ~ 2,
                            d_educ == 4 ~ 1),
      d_salud = case_when(d_salud == 1 ~ 4,
                          d_salud == 2 ~ 3,
                          d_salud == 3 ~ 2,
                          d_salud == 4 ~ 1),
      d_trabajo = case_when(d_trabajo == 1 ~ 4,
                            d_trabajo == 2 ~ 3,
                            d_trabajo == 3 ~ 2,
                            d_trabajo == 4 ~ 1),
      d_justicia = case_when(d_justicia == 1 ~ 4,
                             d_justicia == 2 ~ 3,
                             d_justicia == 3 ~ 2,
                             d_justicia == 4 ~ 1))</code></pre>
<p>Tambi√©n podemos usar esta opci√≥n m√°s corta. En esta le estamos
pidiendo ejecutar un cambio sa trav√©s de las cuatro variables
mencionadas, y luego mencionamos la condici√≥n. Para no repetir las
cuatro variables en cada condici√≥n podemos poner un punto (.).</p>
<pre class="r"><code>data &lt;- data %&gt;%
  mutate(across(c(d_educ, d_salud, d_trabajo, d_justicia),
    ~ case_when(
        . == 1 ~ 4,
        . == 2 ~ 3,
        . == 3 ~ 2,
        . == 4 ~ 1)))</code></pre>
<p>üó®Ô∏è Para poder crear el indicador, necesitamos que todas las variables
a usar sean num√©ricas porque las tendremos que sumar. Entonces, primero
verificamos el tipo de dato de cada variable.</p>
<pre class="r"><code>str(data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    562 obs. of  18 variables:
##  $ edad      : num  19 40 47 20 37 27 36 37 35 19 ...
##  $ sexo      : num  1 2 2 2 2 2 2 1 1 1 ...
##  $ macrozona : num  4 3 4 4 4 4 3 4 4 4 ...
##  $ P02       : num  7 7 10 10 6 4 8 1 1 3 ...
##  $ P07       : num  4 1 4 4 4 2 4 4 4 3 ...
##  $ P08       : num  1 3 1 1 1 1 2 3 1 1 ...
##  $ clase     : num  3 3 3 3 3 4 3 3 4 3 ...
##  $ P17       : num  4 2 4 3 1 3 2 1 3 3 ...
##  $ P18       : num  3 2 3 4 2 3 3 1 3 3 ...
##  $ P19       : num  4 4 4 4 4 4 3 4 3 4 ...
##  $ P20       : num  3 1 3 3 3 3 3 1 2 3 ...
##  $ P21       : num  3 2 3 3 1 1 2 1 2 3 ...
##  $ P22       : num  2 3 3 3 3 1 3 1 2 3 ...
##  $ d_educ    : num  2 3 2 1 2 1 3 1 3 2 ...
##  $ d_salud   : num  1 1 1 2 2 1 2 1 1 1 ...
##  $ d_trabajo : num  2 3 1 1 1 3 3 1 1 2 ...
##  $ d_justicia: num  2 1 2 1 2 1 2 1 1 2 ...
##  $ P37       : num  2 1 2 6 3 2 4 1 2 2 ...</code></pre>
<pre class="r"><code>data=data %&gt;%
  mutate(suma = d_educ + d_salud + d_trabajo + d_justicia)</code></pre>
<p>Revisamos m√≠nimo y m√°ximo</p>
<pre class="r"><code>summary(data$suma)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   4.000   4.000   6.000   6.306   8.000  15.000</code></pre>
<p>Creamos el indicador de 0 al 100</p>
<pre class="r"><code>library(scales)
data = data %&gt;%
  mutate(indicador = rescale(suma, to = c(0, 100)))</code></pre>
<p>Analicemos los descriptivos del indicador que creamos</p>
<pre class="r"><code>data %&gt;% 
  group_by(clase) %&gt;% 
  summarise(
    Media = mean(indicador), 
    Mediana = median(indicador), 
    Desviacion = sd(indicador), 
    Minimo = min(indicador), 
    Maximo = max(indicador),
    Q1 = quantile(indicador, 0.25), #Primer cuartil
    Q3 = quantile(indicador, 0.75) #Tercer cuartil
  )</code></pre>
<pre><code>## # A tibble: 4 √ó 8
##   clase Media Mediana Desviacion Minimo Maximo    Q1    Q3
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1  13.6    9.09       12.5      0   36.4  9.09  15.9
## 2     2  25.9   18.2        21.2      0   72.7  9.09  36.4
## 3     3  21.0   18.2        19.8      0   90.9  0     36.4
## 4     4  18.9    9.09       22.0      0  100    0     27.3</code></pre>
</div>
</div>
</div>
<div
id="cu√°l-es-la-diferencia-de-la-percepci√≥n-de-desigualdad-entre-clases"
class="section level2">
<h2>4.2 ¬øCu√°l es la diferencia de la percepci√≥n de desigualdad entre
<em>clases</em>?</h2>
<p>Primero indiquemos las etiquetas de la variable. El diccionario de
datos indicaba que hab√≠a 4 niveles para la variable clase. Dentro del
mutate, debemos iniciar indicando que queremos que la variable sea
factor, los niveles van del 1 al 4 y luego indicamos la etiqueta para
cada nivel. La etiqueta se otorga en el orden. En este caso el 1 ser√°
Alta, 2 ser√° Media alta, 3 ser√° Media baja y 4 ser√° Baja.</p>
<pre class="r"><code>data = data %&gt;%
 mutate(clase = factor(clase, levels = 1:4, labels = c(&quot;Alta&quot;, &quot;Media alta&quot;, &quot;Media baja&quot;, &quot;Baja&quot;), ordered = TRUE))</code></pre>
<p>Para hacer la tabla resumen de los descriptivos debemos agregar la
agrupaci√≥n por clase antes. As√≠ los resultados saldr√°n seg√∫n la
clase.</p>
<pre class="r"><code>data%&gt;%
  group_by(clase) %&gt;%
  summarise(
    Media = mean(indicador), 
    Mediana = median(indicador), 
    Desviacion = sd(indicador), 
    Minimo = min(indicador), 
    Maximo = max(indicador),
    Q1 = quantile(indicador, 0.25), #Primer cuartil
    Q3 = quantile(indicador, 0.75) #Tercer cuartil
  )</code></pre>
<pre><code>## # A tibble: 4 √ó 8
##   clase      Media Mediana Desviacion Minimo Maximo    Q1    Q3
##   &lt;ord&gt;      &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Alta        13.6    9.09       12.5      0   36.4  9.09  15.9
## 2 Media alta  25.9   18.2        21.2      0   72.7  9.09  36.4
## 3 Media baja  21.0   18.2        19.8      0   90.9  0     36.4
## 4 Baja        18.9    9.09       22.0      0  100    0     27.3</code></pre>
<pre class="r"><code>library(ggplot2)</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 4.2.3</code></pre>
<pre class="r"><code>ggplot(data, aes(x=clase, y=indicador, color=clase)) + 
  geom_boxplot() + 
  geom_jitter(shape=16, position=position_jitter(0.2),alpha=0.6) +#para agregar los casos como puntos
  theme_classic()</code></pre>
<p><img src="pd2_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>‚û°Ô∏è An√°lisis: En el segundo gr√°fico la dispersi√≥n de los datos es muy
similar en el grupo de clase social Media baja y Baja. Por otro lado, en
el grupo de la clase Alta, se aprecia que la dispersi√≥n es mucho mayor
(la caja es mucho m√°s grande). Los <em>outliers</em> se muestran como
puntos individuales m√°s all√° del bigote de la caja, los puntos m√°s
alejados se encuentran en el grupo de clase Baja.</p>
</div>
</div>
<div id="section" class="section level1">
<h1></h1>
<div
id="c√≥mo-se-distribuye-la-percepci√≥n-de-desigualdad-econ√≥mica-en-el-per√∫"
class="section level2">
<h2>4.2 ¬øC√≥mo se distribuye (%)la percepci√≥n de desigualdad econ√≥mica en
el Per√∫?</h2>
<p>Usaremos la variable <strong>P07</strong>:</p>
<p><code>¬øQu√© tan desigual cree que es el Per√∫ econ√≥micamente?</code></p>
<p>De acuerdo al diccionario de datos encontramos cuatro posibles
respuestas</p>
<ul>
<li>1:Nada</li>
<li>2:Poco</li>
<li>3:Algo</li>
<li>4:Mucho</li>
</ul>
<div id="an√°lisis-de-una-variable-ordinal" class="section level3">
<h3><strong>An√°lisis de una variable ordinal</strong></h3>
<p>Pasos para analizar una variable ordinal A. Identificar el tipo de
variable (str, class) B. Convertimos la variable al tipo de dato que
necesitamos dependiendo el caso C. Elaboramos un objeto que nos permita
ver preliminarmente los datos de la variable. D. Elaboramos un gr√°fico
que vaya acorde a la variable ordinal (gr√°fico de barras)</p>
<p>Comprobamos el tipo de dato que analizaremos</p>
<pre class="r"><code>class(data$P07)</code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>Del diccionario de datos, sabemos que esta variable es
<strong>ordinal</strong>, revisemos si los niveles tienen coherencia con
las respuestas recogidas en la encuesta.</p>
<pre class="r"><code>data %&gt;%
 group_by(P07) %&gt;%
 summarise(Freq=n()) #Veamos los niveles de la variable</code></pre>
<pre><code>## # A tibble: 4 √ó 2
##     P07  Freq
##   &lt;dbl&gt; &lt;int&gt;
## 1     1    32
## 2     2   125
## 3     3    97
## 4     4   308</code></pre>
<p>üí• Etiquetamos y categorizamos como factor. Para ello usaremos el
comando <strong>mutate</strong>. Este comando forma parte del paquete
dplyr. Lo usaremos cada vez que se quiera modificar de alguna forma la
data o alguna variable en espec√≠fico.</p>
<pre class="r"><code>data = data %&gt;%
 mutate(P07 = factor(P07, levels = 1:4, labels = c(&quot;Nada&quot;, &quot;Poco&quot;, &quot;Algo&quot;, &quot;Mucho&quot;), ordered = TRUE))</code></pre>
<p>En este caso queremos que dentro de la variable P07 se almacene el
resultado de convertir P07 a factor y seg√∫n los cuatro niveles que tiene
otorgar una etiqueta. Es as√≠ que lo que aparece como 1 ser√° Nada, lo que
aparece como 2 ser√° Poco, 3 ser√° Algo y 4, Mucho.</p>
<p>Revisemos que el cambio se haya realizado correctamente usando el
comando <strong>summarise</strong> del paquete <code>dplyr</code>. Los
resultados de la tabla deben mantenerse, lo que var√≠a debe ser la
etiqueta de la categor√≠a.</p>
<pre class="r"><code>data %&gt;%
 group_by(P07) %&gt;%
 summarise(Freq=n())</code></pre>
<pre><code>## # A tibble: 4 √ó 2
##   P07    Freq
##   &lt;ord&gt; &lt;int&gt;
## 1 Nada     32
## 2 Poco    125
## 3 Algo     97
## 4 Mucho   308</code></pre>
<p>A primera vista, la tabla nos indica que la mayor√≠a de los
encuestados (453) opina que hay mucha desigualdad econ√≥mica en el pa√≠s.
Pero, ¬øcu√°nto ser√≠a dicho resultado en porcentaje?</p>
<p>Podemos realizar una tabla de frecuencias y porcentajes agregando una
linea al comando anterior. Asimismo, para poder graficar los resultados
de las tablas, tendremos que almacenarlas en un objeto. Trabajemos con
esta tabla resumen y asignemosle el nombre
<em><code>para_grafico</code></em> para posteriormente llamarla al
graficar.</p>
<p>Para agregar el porcentaje usaremos <strong>mutate</strong>.
Recordemos que el porcentaje ser√≠a el resultado de la frecuencia de la
categor√≠a sobre el total. Debemos solicitarle a R que realice ese
c√°lculo en cada fila.</p>
<pre class="r"><code>para_grafico=data %&gt;%
 group_by(P07) %&gt;%
 summarize(Freq=n()) %&gt;%
 mutate(Porcentaje = (Freq / sum(Freq))*100)</code></pre>
<p>Hemos creado un nuevo objeto llamado para_grafico. Para poder
visualizarlo podemos llamarlo por su nombre. Siempre que almacenemos un
objeto, debemos llamarlo para poder visualizarlo.</p>
<pre class="r"><code>para_grafico</code></pre>
<pre><code>## # A tibble: 4 √ó 3
##   P07    Freq Porcentaje
##   &lt;ord&gt; &lt;int&gt;      &lt;dbl&gt;
## 1 Nada     32       5.69
## 2 Poco    125      22.2 
## 3 Algo     97      17.3 
## 4 Mucho   308      54.8</code></pre>
<p>Afirmamos que m√°s del 50% de los encuestados percibe que el pa√≠s es
muy desigual econ√≥micamente.</p>
<p>Tambi√©n podemos analizar c√≥mo cambia esto si solo seleccionamos los
casos de los encuestados/as menores de 30 a√±os. Para ello haremos uso
del comando <strong>filter</strong>. Este comando necesita dos
argumentos: a. La variable sobre la cual se filtrar√° y b. la condici√≥n.
En este caso la variable es edad y la condici√≥n es ‚Äúmenos a 30‚Äù o
&lt;30.</p>
<pre class="r"><code>data %&gt;%
  filter(edad&lt;30)%&gt;%
  group_by(P07) %&gt;%
  summarize(Freq=n()) %&gt;%
  mutate(Porcentaje = (Freq / sum(Freq))*100)</code></pre>
<pre><code>## # A tibble: 4 √ó 3
##   P07    Freq Porcentaje
##   &lt;ord&gt; &lt;int&gt;      &lt;dbl&gt;
## 1 Nada      7       4.35
## 2 Poco     30      18.6 
## 3 Algo     36      22.4 
## 4 Mucho    88      54.7</code></pre>
<p>Grafiquemos los resultados con <em><code>ggplot2</code></em></p>
<p>Nuestra variable es categ√≥rica, por lo tanto realizaremos el gr√°fico
acorde:</p>
<pre class="r"><code>ggplot(para_grafico, aes(x=P07, y=Porcentaje, fill=P07)) + 
geom_bar(stat = &quot;identity&quot;) +
  theme_bw()</code></pre>
<p><img src="pd2_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>Este es un gr√°fico b√°sico, pero podemos personalizarlo<a href="#fn2"
class="footnote-ref" id="fnref2"><sup>2</sup></a> seg√∫n nuestros
gustos.</p>
<pre class="r"><code>library(tayloRswift) #opcional (una ventaja de que R sea software libre)

ggplot(para_grafico, aes(x=P07, y=Porcentaje, fill=P07)) + 
  geom_bar(stat = &quot;identity&quot;)  +
  ggtitle(&quot;Percepci√≥n de desigualdad econ√≥mica&quot;) +
  xlab(&quot;¬øQu√© tan desigual cree que es el Per√∫ econ√≥micamente&quot;) + ylab(&quot;Porcentaje&quot;)+
  geom_text(aes(label=round(Porcentaje,1)), vjust=1.30, color=&quot;black&quot;, size=3)+
  theme(panel.background=element_rect(fill = &quot;white&quot;, colour = &quot;white&quot;)) +
  scale_fill_taylor(palette = &quot;lover&quot;) #fearless, speakNow, Red</code></pre>
<p><img src="pd2_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>El ejercicio de an√°lisis descriptivo con variables num√©ricas lo
realizaremos con un indicador aditivo que crearemos a continuaci√≥n.</p>
</div>
</div>
</div>
<div id="ejercicios" class="section level1">
<h1><strong>5. Ejercicios</strong></h1>
<ol style="list-style-type: decimal">
<li><p>Analiza los descriptivos de la variable P08. Recuerda determinar
primero qu√© tipo de variable es. Realiza el gr√°fico correspondiente e
interpreta.</p></li>
<li><p>Analiza los descriptivos de la variable P37. Recuerda determinar
primero qu√© tipo de variable es. Realiza el gr√°fico correspondiente e
interpreta.</p></li>
<li><p>Crea el indicador de percepci√≥n de gravedad de desigualdad
socioecon√≥mica en el Per√∫. Para ello usa las variables P17, P18, P19,
P20, P21 y P22. El indicador debe ir del del 0 al 10, en donde 0 sea
nada grave y 10 sea muy grave. No olvides revisar el sentido de cada
pregunta.</p></li>
<li><p>Con el indicador creado previamente, realiza el gr√°fico
pertinente e interpreta.</p></li>
</ol>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p><a href="https://www.data-to-viz.com/caveat/pie.html"
class="uri">https://www.data-to-viz.com/caveat/pie.html</a><a
href="#fnref1" class="footnote-back">‚Ü©Ô∏é</a></p></li>
<li id="fn2"><p><a
href="https://cran.r-project.org/web/packages/tayloRswift/readme/README.html"
class="uri">https://cran.r-project.org/web/packages/tayloRswift/readme/README.html</a><a
href="#fnref2" class="footnote-back">‚Ü©Ô∏é</a></p></li>
</ol>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
