<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Práctica dirigida 1</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/vembedr-0.1.5.9000/css/vembedr.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Prácticas Estadística_1</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="intro.html">Introducción</a>
</li>
<li>
  <a href="basico.html">Procedimientos básicos</a>
</li>
<li>
  <a href="pd1.html">Práctica 1</a>
</li>
<li>
  <a href="pd2.html">Práctica 2</a>
</li>
<li>
  <a href="pd3.html">Práctica 3</a>
</li>
<li>
  <a href="pd4.html">Práctica 4</a>
</li>
<li>
  <a href="pd5.html">Práctica 5</a>
</li>
<li>
  <a href="pd6.html">Práctica 6</a>
</li>
<li>
  <a href="pd7.html">Práctica 7</a>
</li>
<li>
  <a href="pd8.html">Práctica 8</a>
</li>
<li>
  <a href="pd9.html">Práctica 9</a>
</li>
<li>
  <a href="pd10.html">Práctica 10</a>
</li>
<li>
  <a href="pd11.html">Práctica 11</a>
</li>
<li>
  <a href="pd12.html">Práctica 12</a>
</li>
<li>
  <a href="pd13.html">Práctica 13</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="https://github.com/arturomaldonado/PracticasPOL278">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Práctica dirigida 1</h1>

</div>


<p><br></p>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
<center>
<img src=" " width="200"/>
</center>
<p><img src="logoPUCP.png" width="30%" /></p>
<p><strong>FACULTAD DE CIENCIAS SOCIALES - PUCP</strong><br></p>
<div
id="curso-pol-278---estadística-para-el-análisis-político-1-semestre-2023---1"
class="section level2">
<h2>Curso: POL 278 - Estadística para el análisis político 1 | Semestre
2023 - 1 <br></h2>
<hr />
</div>
<div id="introducción-a-r" class="section level2">
<h2><strong>Introducción a R</strong></h2>
<p><a id='beginning'></a></p>
<p>Vamos a hablar de tres estructuras de datos en R:</p>
<ol style="list-style-type: decimal">
<li><a href="#part1">¿Qué es R?</a></li>
<li><a href="#part2">¿Qué podemos hacer con R?</a></li>
<li><a href="#part3">Conceptos básicos para programar en R</a></li>
<li><a href="#part4">Vectores</a></li>
<li><a href="#part5">Data Frames</a></li>
<li><a href="#part6">Descriptivos</a></li>
</ol>
<hr />
<p><a id='part1'></a></p>
</div>
<div id="qué-es-r" class="section level2">
<h2>1. ¿Qué es R?</h2>
<p>R es un lenguaje de programación y un entorno de software libre y de
código abierto utilizado para análisis estadístico y visualización de
datos. Fue desarrollado por Ross Ihaka y Robert Gentleman en la
Universidad de Auckland, Nueva Zelanda, en 1993. Desde entonces, ha sido
ampliamente adoptado por la comunidad científica y empresarial como una
herramienta esencial para el análisis y la visualización de datos.</p>
<p>R cuenta con una amplia variedad de paquetes y bibliotecas que
permiten el análisis estadístico, la minería de datos, el aprendizaje
automático, la visualización de datos y la generación de informes.
Además, su sintaxis es relativamente sencilla, lo que facilita su
aprendizaje y uso para personas con distintos niveles de experiencia en
programación, lo cual ha significado su uso en diversos rubros.</p>
<div class="vembedr">
<div>
<iframe src="https://www.youtube.com/embed/ZCQHm63xc4s" width="533" height="300" frameborder="0" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
<hr />
<p><a id='part2'></a></p>
</div>
<div id="qué-podemos-hacer-con-r" class="section level2">
<h2>2. ¿Qué podemos hacer con R?</h2>
<p><img src="QphacerR1.png" /></p>
<p><img src="QphacerR2.png" /></p>
<p><img src="QphacerR3.png" /></p>
<p><img src="QphacerR4.png" /></p>
<hr />
<p><a id='part3'></a></p>
</div>
<div id="conceptos-básicos-para-programar-en-r" class="section level2">
<h2>3. Conceptos básicos para programar en R</h2>
<p>Instalar <a href="http://www.r-project.org">R</a></p>
<p>Instalar <a href="https://posit.co/downloads/">RStudio</a></p>
</div>
<div id="usando-r" class="section level2">
<h2>Usando R</h2>
<p><img src="PrograR.png" /></p>
</div>
<div id="sintaxis-en-r" class="section level2">
<h2>Sintaxis en R</h2>
<p><img src="Sintax.png" /></p>
<hr />
<hr />
<p><a id='part3'></a></p>
</div>
<div id="análisis-descriptivo-en-r" class="section level2">
<h2>3. Análisis descriptivo en R</h2>
<pre class="r"><code>library(rio)    
data=import(&quot;Mosteller.csv&quot;) </code></pre>
<p>Esta base de datos pertenece al siguiente paper <a
href="https://pubmed.ncbi.nlm.nih.gov/8528684/"
class="uri">https://pubmed.ncbi.nlm.nih.gov/8528684/</a> Mosteller
(1995) realizó un estudio longitudinal sobre el impacto del tamaño de la
clase en los primeros grados escolares, sobre el desempeño estudiantil y
el desarrollo personal. Un estudio longitudinal es aquel en el que se
hace un seguimiento a participantes a lo largo del tiempo. Este estudio
en concreto duró de 1985 a 1989 y en él participaron 11.601 estudiantes.
Durante los cuatro años del estudio, los estudiantes fueron asignados
aleatoriamente a clases pequeñas, a clases de tamaño normal o a clases
de tamaño normal con ayuda. Aunque el programa se detuvo en 1989 después
de que la primera clase de jardín de infancia del programa terminara el
tercer grado, la recopilación de información (por ejemplo, el
rendimiento en los exámenes de octavo grado, el promedio general de la
escuela secundaria) continuó hasta el final de la asistencia de los
participantes a la escuela secundaria.</p>
<p>¿Por qué son importantes este tipo de estudios? Porque constituyen
evidencia para los tomadores de decisión de política pública. Pensemos
que esto puede contribuir a definir si la política educativa debe
apostar por salones de clases con grupos pequeños o no, pensando en
fortalecer las competencias de los estudiantes.</p>
<p>No obstante, para esta sesión no vamos a examinar las hipótesis o
resultados del trabajo de Mosteller (1995), pero sí vamos a utilizar
parte de su base de datos para el análisis descriptivo.</p>
<p>Exploramos las variables que tiene nuestra base de datos:</p>
<p>chr, factor, ordered factor, num, int</p>
<pre class="r"><code>names(data)</code></pre>
<pre><code>## [1] &quot;race&quot;       &quot;classtype&quot;  &quot;yearssmall&quot; &quot;hsgrad&quot;     &quot;g4math&quot;    
## [6] &quot;g4reading&quot;</code></pre>
<pre class="r"><code>str(data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    1600 obs. of  6 variables:
##  $ race      : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ classtype : int  3 1 2 1 1 1 2 3 2 3 ...
##  $ yearssmall: int  0 4 0 4 4 4 0 0 0 0 ...
##  $ hsgrad    : int  1 1 1 1 1 1 1 1 0 1 ...
##  $ g4math    : int  711 709 698 740 771 709 698 673 744 731 ...
##  $ g4reading : int  750 725 692 836 725 761 778 665 735 698 ...</code></pre>
<p>El contenido de cada variable lo podemos ver en la siguiente
tabla:</p>
<p><img src="diccionario.png" width="40%" style="display: block; margin: auto;" /></p>
</div>
<div id="configuración-de-las-variables" class="section level2">
<h2>3.1. Configuración de las variables</h2>
<p>Siempre antes de comenzar a realizar nuestro análisis, debemos
identificar la estructura de las variables y verificar que estén bien
“configuradas”. Es decir que la escala de la variable coincida con el
objeto en R.</p>
<p><strong>De “race”</strong></p>
<pre class="r"><code>table(data$race) #Exploramos frecuencias</code></pre>
<pre><code>## 
##    1    2    3    6 
## 1383  211    5    1</code></pre>
<pre class="r"><code>class(data$race) #Exploramos el formato de la variable</code></pre>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<pre class="r"><code>data$race = factor(data$race, levels = c(1:6), labels = c(&quot;white&quot;,&quot;black&quot;,&quot;asian&quot;,&quot;hispanic&quot;,&quot;native american&quot;,&quot;others&quot;)) #Otorgamos formato
table(data$race)</code></pre>
<pre><code>## 
##           white           black           asian        hispanic native american 
##            1383             211               5               0               0 
##          others 
##               1</code></pre>
<pre class="r"><code>class(data$race)</code></pre>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<p><strong>De “classtype”:</strong></p>
<pre class="r"><code>class(data$classtype) </code></pre>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<pre class="r"><code>table(data$classtype)</code></pre>
<pre><code>## 
##   1   2   3 
## 481 578 541</code></pre>
<pre class="r"><code>data$classtype = factor(data$classtype, levels = c(1:3), labels = c(&quot;small&quot;,&quot;regular&quot;,&quot;regular with aid&quot;))
str(data$classtype)</code></pre>
<pre><code>##  Factor w/ 3 levels &quot;small&quot;,&quot;regular&quot;,..: 3 1 2 1 1 1 2 3 2 3 ...</code></pre>
<pre class="r"><code>table(data$classtype)</code></pre>
<pre><code>## 
##            small          regular regular with aid 
##              481              578              541</code></pre>
<p><strong>De “hsgrad”</strong></p>
<pre class="r"><code>class(data$hsgrad) </code></pre>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<pre class="r"><code>table(data$hsgrad)</code></pre>
<pre><code>## 
##    0    1 
##  158 1442</code></pre>
<pre class="r"><code>data$hsgrad = factor(data$hsgrad, levels = c(0:1), labels = c(&quot;did not graduate&quot;,&quot;did graduate&quot;)) #ojo con el orden
table(data$hsgrad) </code></pre>
<pre><code>## 
## did not graduate     did graduate 
##              158             1442</code></pre>
<pre class="r"><code>str(data$hsgrad)</code></pre>
<pre><code>##  Factor w/ 2 levels &quot;did not graduate&quot;,..: 2 2 2 2 2 2 2 2 1 2 ...</code></pre>
<p><strong>“g4math”, “g4reading”, “yearssmall”</strong> son variables
numéricas y están configuradas como vectores numéricos de números
enteros (integer) por lo cual lo dejamos así.</p>
</div>
<div id="media-y-mediana" class="section level2">
<h2>Media y mediana</h2>
<p>Entonces, una vez configurados adecuadamente nuestros
<strong>objetos</strong>, pidamos los estadísticos de tendencia central
para nuestras variables.</p>
<p>Antes instalamos algunos paquetes que utilizaremos</p>
<ul>
<li><p><strong>install.packages(“DescTools”)</strong> para pedir los
estadísticos de tendencia central</p></li>
<li><p><strong>install.packages(“e1071”)</strong> para asimetría y
curtosis</p></li>
</ul>
<p>Las variables solicitadas son race, classtype y hsgrad</p>
<p><strong>Para “race” podemos:</strong></p>
<pre class="r"><code>#AÑADIR EJEMPLO</code></pre>
<p><strong>Para “g4math” podemos:</strong></p>
<pre class="r"><code>library(DescTools)
mean(data$g4math) #este comando nos permitirá calcular la media</code></pre>
<pre><code>## [1] 712.7094</code></pre>
<p><strong>Para “g4math” podemos:</strong></p>
<pre class="r"><code>library(DescTools)
median(data$g4math) #este comando nos permitirá calcular la mediana</code></pre>
<pre><code>## [1] 712</code></pre>
<hr />
<p>En la sesión anterior, revisamos la lógica de la sintaxis en R, así
como algunos conceptos importantes para entender la manera en que
funciona este lenguaje de programación estadístico: listas, vectores y
data frames.</p>
<p>En esta sesión reforzaremos todo lo relacionado con el análisis
descriptivo univariado de datos en R, junto con algunos ejercicios
gráficos e introducción al lenguaje del paquete
<strong>ggplot2</strong>, una librería muy usada para visualización de
datos en este programa. ¡Empezamos!</p>
</div>
<div id="recordando-la-sesión-pasada" class="section level2">
<h2>Recordando la sesión pasada:</h2>
<p>En las sesiones previas hemos visto que hay este tipo de
variables:</p>
<table>
<colgroup>
<col width="8%" />
<col width="91%" />
</colgroup>
<thead>
<tr class="header">
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Variables nominales</strong></td>
<td><p>Género (Hombre=1, Mujer=2). Religión (Católico=1, Evangélico=2,
Otro=3). Región (Lima=1, Arequipa=2, La Libertad =3).</p>
<p>Partido del presidente (Perú Libre=1, APP=2, PPC=3)</p></td>
</tr>
<tr class="even">
<td><strong>Variables ordinales</strong></td>
<td>Educación (Analf=0, Prim=1, Sec=2, Tec=3, Univ=4, Post=5).
Importancia de religión en su vida (Nada importante=1, Poco
importante=2, Algo importante=3, Muy importante=4). Nivel de
satisfacción con la democracia (Muy instafisfecho=1, Insatisfecho=2,
Satisfecho=3, Muy satisfecho=4).</td>
</tr>
<tr class="odd">
<td><strong>Variables continuas</strong></td>
<td>Estatura, peso, ingreso mensual,extensión, PBI per cápita, % de
participación electoral.</td>
</tr>
<tr class="even">
<td><strong>Variables discretas</strong></td>
<td>Número de hijos, edad, número de revocatorias, número de postas
médicas, población.</td>
</tr>
</tbody>
</table>
<p>En R, las variables nominales se denominan <strong>factores</strong>,
las variables ordinales como <strong>factores ordinale</strong>s y las
variables continuas y discretas como <strong>num</strong>. En algunos
casos, se puede encontrar lectura de variables como <strong>int</strong>
(<em>interger</em>), que también son variables numéricas.</p>
<p>De forma similar, tenemos algunas medidas de tendencia central, de
dispersión y de distribución de datos según el tipo de variable que nos
encontramos analizando:</p>
<p><img src="medidas.png" width="60%" style="display: block; margin: auto;" /></p>
<p>En línea con ello, también tenemos algunos gráficos según el tipo de
variable de interés:</p>
<p><img src="graphs.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Hay una infinidad de gráficos a los que se puede recurrir dependiendo
del interés de la investigadora o el investigador. Aquí hay algunos
ejemplos útiles: <a href="https://www.data-to-viz.com/"
class="uri">https://www.data-to-viz.com/</a></p>
<p>¿Por qué es importante la visualización de datos? Graficar data ayuda
a contar historias y, sobre todo, <strong>dar un sentido</strong> a los
cientos, miles, o incluso millones de filas de datos que con las que
podríamos eventualmente trabajar, facilitando la comprensión de la
información.</p>
<p>En tanto la finalidad de la visualización de datos es ayudar a una
mejor comprensión de la información, hay que tener cuidado con algunos
gráficos como, por ejemplo, el gráfico de sectores o <strong>pie
chart</strong>. A pesar de que la variable que estamos analizando
permita utilizar este gráfico, hay buenas razones para no usarlo, y por
qué es muchas veces mejor un gráfico de barras: <a
href="https://www.data-to-viz.com/caveat/pie.html"
class="uri">https://www.data-to-viz.com/caveat/pie.html</a></p>
</div>
<div id="análisis-descriptivo-y-gráficos-según-tipo-de-variables"
class="section level2">
<h2>Análisis descriptivo y gráficos según tipo de variables:</h2>
<p>Vamos a empezar con los análisis. Carguemos la data
<em>fsi_democracy-index.xlsx</em>, del proyecto <strong>Fragile State
Index</strong>. Esta base de datos se compone de doce indicadores de
riesgo, que permiten medir la condición de diferentes Estados en un
momento determinado del tiempo. Esto es de suma importancia, ya que de
su fortaleza depende en gran medida el efectivo desarrollo de políticas
públicas orientadas a la ciudadanía.</p>
<p>Más sobre la base y los indicadores por acá: <a
href="https://fragilestatesindex.org/indicators/"
class="uri">https://fragilestatesindex.org/indicators/</a></p>
<pre class="r"><code>library(rio) #Convocamos el paquete   
data=import(&quot;fsi_democracy-index.xlsx&quot;) 
str(data)</code></pre>
<ol style="list-style-type: decimal">
<li>Análisis de variables nominales:</li>
</ol>
<p>A esta base de datos, sin embargo, se le ha incluido el índice de
democracia, un indicador que da cuenta de las características del
régimen político de cada país. Exploremos esta variable:</p>
<pre class="r"><code>#Esto debemos modificarlo:
class(data$Type)
table(data$Type)</code></pre>
<p>¿Cómo está medida la variable?</p>
<p>Tal vez eso no es lo más recomendable para el análisis. Démosle el
formato debido:</p>
<pre class="r"><code>data$Type = factor(data$Type, levels = c(&quot;Authoritarian regime&quot;, &quot;Hybrid regime&quot;, &quot;Flawed democracy&quot;, &quot;Full democracy&quot;))
str(data$Type)</code></pre>
<p>Exploremos las frecuencias. Una forma de obtener las frecuencias de
cada categoría, así como las frecuencias relativas porcentuales es con
la función <strong>table</strong> :</p>
<pre class="r"><code>table(data$Type) #hacemos una tabla de frecuencia
prop.table(table(data$Type))*100</code></pre>
<p>¡Hora de graficar! La comunidad de R ha creado muchos paquetes o
librerías para visualizar datos de una forma más didáctica y atractiva.
Un ejemplo de ello es <strong>ggplot2</strong>, una librería muy
utilizada para visualizar datos. <strong>ggplot2</strong> tiene un
lenguaje propio, y los códigos pueden resultar algo largos, pero es muy
intuitivo y permite manipular mucho los resultados.</p>
<p>Más información sobre el lenguaje de <strong>ggplot2</strong>: <a
href="https://www.rstudio.com/wp-content/uploads/2015/04/ggplot2-spanish.pdf"
class="uri">https://www.rstudio.com/wp-content/uploads/2015/04/ggplot2-spanish.pdf</a></p>
<p>Llamemos la librería y veamos qué opciones tiene para analizar
nuestra variable:</p>
<pre class="r"><code>grafico1 &lt;- table(data$Type) #creamos un objeto que contenga la tabla de frecuencias dela variable

#Volvamos nuestro objeto un dataframe:
grafico1 = as.data.frame(grafico1)

#Para cambiar los nombres de las columnas: es un código frecuente para dar mayor orden a una base de datos
colnames(grafico1) = c(&quot;Reg&quot;,&quot;Freq&quot;)</code></pre>
<pre class="r"><code>library(ggplot2) #llamamos a ggplot2
ggplot(grafico1, aes(x=&quot;&quot;, y=Freq, fill=Reg)) + #Seleccionamos las variables
  geom_bar(stat=&quot;identity&quot;, width=1)+ #Agregando capas
  coord_polar(&quot;y&quot;, start=0) #Coordenadas cartesianas</code></pre>
<pre class="r"><code>#Para eliminar elementos innecesarios del gráfico:

ggplot(grafico1, aes(x=&quot;&quot;, y=Freq, fill=Reg)) +
  ggtitle(&quot;Índice de democracia&quot;) + #Agregamos el título
  geom_bar(stat=&quot;identity&quot;, width=1, color=&quot;white&quot;) +
  coord_polar(&quot;y&quot;, start=0) +
    theme_void() #Con esto quitamos los elementos no requeridos</code></pre>
<pre class="r"><code>#Podemos escoger los colores que consideramos:

pc=ggplot(grafico1, aes(x=&quot;&quot;, y=Freq, fill=Reg)) +
  ggtitle(&quot;Índice de democracia&quot;) + #Agregamos el título
  geom_bar(stat=&quot;identity&quot;, width=1, color=&quot;white&quot;) +
  coord_polar(&quot;y&quot;, start=0) +
  guides(fill=guide_legend(title=&quot;Régimen&quot;))+ #añadimos título a la leyenda
  theme_void() #Con esto quitamos los elementos no requeridos

pc + scale_fill_manual(values=c(&quot;#999999&quot;, &quot;#E69F00&quot;, &quot;#56B4E9&quot;, &quot;#00FF7F&quot;, &quot;#008B8B&quot;,&quot;#D8BFD8&quot;)) #Pintamos y seleccionamos los colores manualmente</code></pre>
<pre class="r"><code>#Escogiendo una paleta en específico: aquí ya no escogemos los colores
pc + scale_fill_brewer(palette=&quot;Dark2&quot;)</code></pre>
<div id="más-sobre-personalizar-nuestros-gráficos"
class="section level3">
<h3>Más sobre personalizar nuestros gráficos</h3>
<p>La ventaja de que R sea un software libre es que permite a la
comunidad hacer cosas muy interesantes e innovadoras, hasta una paleta
con colores de los albums de Taylor Swift para pintar nuestros
gráficos!</p>
<p>Instalamos esto en R y llamamos a la librería “taylor”</p>
<p>remotes::install_github(“wjakethompson/taylor”)</p>
<p>Más información sobre esta librería por aquí: <a
href="https://taylor.wjakethompson.com/index.html"
class="uri">https://taylor.wjakethompson.com/index.html</a></p>
<pre class="r"><code>library(taylor)
pc + scale_fill_taylor_d(album=&quot;red&quot;) </code></pre>
<p>Pero, de nuevo, mejor no usar pie charts. Veamos cómo trabajar con
esta librería para hacer un gráfico de barras:</p>
<pre class="r"><code>ggplot(grafico1, aes(x=Reg, y=Freq)) + 
  geom_bar(stat = &quot;identity&quot;)</code></pre>
<p>Demos formato a algunas cosas:</p>
<pre class="r"><code>ggplot(grafico1, aes(x=reorder(Reg,Freq), y=Freq, fill=Reg)) + #Para ordenar el gráfico
  geom_bar(stat = &quot;identity&quot;) +
    coord_flip() #Para voltearlo</code></pre>
<pre class="r"><code>ggplot(grafico1, aes(x=reorder(Reg,Freq), y=Freq, fill=Reg)) + #Para ordenar el gráfico
  geom_bar(stat = &quot;identity&quot;) +
    coord_flip() + #Para voltear las barras
    labs(title=&quot;Índice de democracia&quot;, y=&quot;Frecuencias&quot;, x=&quot;Categorías&quot;)</code></pre>
<pre class="r"><code>ggplot(grafico1, aes(x=reorder(Reg,Freq), y=Freq, fill=Reg)) + #Para ordenar el gráfico
  geom_bar(stat = &quot;identity&quot;) +
    coord_flip() + 
    labs(title=&quot;Índice de democracia&quot;, y=&quot;Frecuencias&quot;, x=&quot;Categorías&quot;)+
    theme(plot.title = element_text(hjust = 1)) + #Posición del título
    theme(panel.background=element_rect(fill = &quot;white&quot;, colour = &quot;white&quot;))  #Fondo y contorno blanco</code></pre>
<pre class="r"><code>bp = ggplot(grafico1, aes(x=reorder(Reg,Freq), y=Freq, fill=Reg)) + 
  geom_bar(stat = &quot;identity&quot;) +
    coord_flip() + 
    labs(title=&quot;Índice de democracia&quot;, y=&quot;Frecuencias&quot;, x=&quot;Categorías&quot;)+
    theme(plot.title = element_text(hjust = 1)) + 
    theme(panel.background=element_rect(fill = &quot;white&quot;, colour = &quot;white&quot;)) + 
    geom_text(aes(label=Freq), vjust=0.5, color=&quot;gray&quot;, size=5) #Frecuencias en las barras
   

bp + scale_fill_taylor_d(album=&quot;Lover&quot;) #Paleta de colores. Lover es un gran álbum!</code></pre>
<p>En conclusión, la democracia plena no es algo que abunde en el mundo.
Esta variable es de naturaleza ordinal. Las variables numéricas se
tratan de la misma manera, pero no es necesario especificar los levels
al momento de convertir la variable a factor.</p>
<ol start="2" style="list-style-type: decimal">
<li>Análisis de variables numéricas</li>
</ol>
<p>Ahora, veamos algunas medidas de tendencia central, distribución y
dispersión para el caso de variables numéricas. Trabajemos con la
variable <em>state legitimacy</em>, indicador que evalúa la
representatividad y apertura del gobierno, y la manera como interactúa
con la ciudadanía. Se toman en cuenta los niveles de confianza en las
instituciones, demostraciones de desobediencia civil e insurgencias
armadas.</p>
<p>Más información del indicador por acá: <a
href="https://fragilestatesindex.org/indicators/p1/"
class="uri">https://fragilestatesindex.org/indicators/p1/</a></p>
<p>Primero cambiemos los nombres de las variables. R funciona mejor
así</p>
<pre class="r"><code>names(data) #Para ver los nombres

colnames(data) = c(&quot;Country&quot;,&quot;Year&quot;,&quot;Rank&quot;,&quot;Score_Frag_States&quot;,&quot;Security&quot;,&quot;Elites&quot;,&quot;G_Grivance&quot;,&quot;Economy&quot;,&quot;Inequality&quot;,&quot;B_Drain&quot;,&quot;State_Legit&quot;,&quot;P_Services&quot;,&quot;Hum_Rights&quot;,&quot;Demo_Press&quot;,&quot;Refugees&quot;,&quot;Interven&quot;,&quot;Democracy_Score&quot;,&quot;Type&quot;)

class(data$State_Legit) #Esta bien medida!</code></pre>
<p>Exploremos la variable. Veamos medidas de tendencia central. Ojo con
cómo está medido: 10 es un Estado que posee un alto grado de
ilegitimidad (o presión). 0 un Estado con poca presión o alta
legitimidad desde la ciudadanía.</p>
<pre class="r"><code>summary(data$State_Legit) #Ojo con los casos perdidos:
sd(data$State_Legit) 
var(data$State_Legit) #veamos la varianza
rango=max(data$State_Legit)-min(data$State_Legit)
rango</code></pre>
<p>Veamos qué nos dicen los gráficos. Veamos qué cosas trae
<strong>ggplot2</strong>. ¿Encontraremos diferentes según las
características del régimen político? ¿Qué conclusiones podríamos sacar
de estos gráficos?:</p>
<pre class="r"><code>ggplot(data, aes(x=&quot;&quot;, y=State_Legit)) +  geom_boxplot()</code></pre>
<pre class="r"><code>ggplot(data, aes(x=Type, y=State_Legit)) +  geom_boxplot()</code></pre>
<pre class="r"><code>ggplot(data, aes(x=Type, y=State_Legit)) + 
  geom_boxplot() + coord_flip() #Volteamos el gráfico</code></pre>
<pre class="r"><code>ggplot(data, aes(x=Type, y=State_Legit, color =Type)) + #Damos color
  geom_boxplot() + coord_flip() #Volteamos el gráfico</code></pre>
<pre class="r"><code>ggplot(data, aes(x=Type, y=State_Legit, color =Type)) + 
  geom_boxplot() + coord_flip() + #Volteamos el gráfico
  theme(legend.position = &quot;top&quot;)</code></pre>
<pre class="r"><code>ggplot(data, aes(x=Type, y=State_Legit, color =Type)) + 
  geom_boxplot() + coord_flip() + #Volteamos el gráfico
 
   theme(legend.position = &quot;top&quot;, axis.text.y = element_blank(), 
        panel.background=element_rect(fill = &quot;white&quot;, colour = &quot;white&quot;)) + #Quitamos categorías
  
  geom_jitter(shape=16, position=position_jitter(0.2)) + #Agregamos los casos como puntos
  
  labs(title = &quot;Legitimidad estatal según el tipo de régimen político&quot;, x=&quot;&quot;, y=&quot;Index&quot;)</code></pre>
<p>Finalmente, también podemos sacar un histograma para visualizar estos
datos. Utilicemos <strong>ggplot2</strong> para agregar más detalles al
gráfico como en los casos previos:</p>
<pre class="r"><code>ggplot(data, aes(x=State_Legit)) + 
  geom_histogram()</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre class="r"><code>ggplot(data, aes(x=State_Legit)) + 
  geom_histogram() + 
    labs(title=&quot;Legitimidad estatal&quot;, y=&quot;Conteo&quot;, x=&quot;Score&quot;)+
    theme(plot.title = element_text(hjust = 0.5)) + 
    theme(panel.background=element_rect(fill = &quot;white&quot;, colour = &quot;white&quot;)) +
    geom_vline(aes(xintercept=mean(State_Legit, na.rm = T)),
            color=&quot;blue&quot;, linetype=&quot;dashed&quot;, size=1)</code></pre>
<pre><code>## Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
## ℹ Please use `linewidth` instead.</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre class="r"><code>ggplot(data, aes(x=State_Legit, color = Type)) + 
  geom_histogram(fill=&quot;white&quot;,alpha=0.5, position=&quot;identity&quot;) + 
    labs(title=&quot;Legitimidad estatal&quot;, y=&quot;Conteo&quot;, x=&quot;IMC&quot;)+
    theme(plot.title = element_text(hjust = 0.5)) + 
    theme(panel.background=element_rect(fill = &quot;white&quot;, colour = &quot;white&quot;))</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre class="r"><code>  #scale_color_brewer(palette=&quot;Pastel2&quot;)</code></pre>
<p>Pueden conocer más sobre cómo editar y personalizar sus gráficos en
el siguiente enlace: <a href="https://r-charts.com/es/ggplot2/"
class="uri">https://r-charts.com/es/ggplot2/</a></p>
<p><strong><em>Ejercicios</em></strong></p>
<ul>
<li>Seleccione dos variables y realice un boxplot. Justifique su
elección de variables y analice los resultados.</li>
</ul>
</div>
</div>
<div id="go-to-page-beginning-go-to-page-beginning"
class="section level1">
<h1><br></br> <a href="#beginning">Go to page beginning</a> <a
href="#beginning">Go to page beginning</a></h1>
<p>En este documento veremos los códigos pertenecientes a la primera
semana práctica del curso de Estadística I</p>
<p>esto es una prueba</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>a7737d46809a6eb45532c7202e0bc0478153aef0</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
