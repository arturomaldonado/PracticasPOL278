<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Práctica dirigida 6</title>

<script src="site_libs/header-attrs-2.20/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Prácticas Estadística_1</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="intro.html">Introducción</a>
</li>
<li>
  <a href="basico.html">Procedimientos básicos</a>
</li>
<li>
  <a href="pd1.html">Práctica 1</a>
</li>
<li>
  <a href="pd2.html">Práctica 2</a>
</li>
<li>
  <a href="Pd3.html">Práctica 3</a>
</li>
<li>
  <a href="pd4.html">Práctica 4</a>
</li>
<li>
  <a href="pd5.html">Práctica 5</a>
</li>
<li>
  <a href="pd6.html">Práctica 6</a>
</li>
<li>
  <a href="pd7.html">Práctica 7</a>
</li>
<li>
  <a href="pd8.html">Práctica 8</a>
</li>
<li>
  <a href="pd9.html">Práctica 9</a>
</li>
<li>
  <a href="pd10.html">Práctica 10</a>
</li>
<li>
  <a href="pd11.html">Práctica 11</a>
</li>
<li>
  <a href="pd12.html">Práctica 12</a>
</li>
<li>
  <a href="pd13.html">Práctica 13</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="https://github.com/arturomaldonado/PracticasPOL278">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Práctica dirigida 6</h1>

</div>


<center>
<img src=" " width="200"/>
</center>
<p><img src="logoPUCP.png" width="30%" /></p>
<p>FACULTAD DE CIENCIAS SOCIALES - PUCP<br></p>
<p>Curso: POL 278 - Estadística para el análisis político 1 | Semestre
2023 - 1 <br></p>
<div id="test-de-anova" class="section level1">
<h1>Test de ANOVA</h1>
<p>Hasta el momento se ha visto una prueba, la prueba t para comparar
medias de <em>solo 2 grupos</em>. En esta sección, veremos cómo expandir
la comparación para varias medias usando otra prueba de inferencia. Es
decir, se busca analizar la relación entre una variable dependiente
cuantitativa (o numérica) y una variable independiente categórica (o de
factor) con más de dos grupos.</p>
<p>En resumen: el test de ANOVA sirve para <strong>comparar la media de
una variable dependiente numérica entre grupos de una variable de tipo
factor con más de 2 grupos</strong>.</p>
<p>Esta prueba se basa en la distribución F y propone el siguiente par
de hipótesis:</p>
<p>H0: No existe diferencia entre las medias poblacionales de los grupos
evaluados / Hay igualdad entre las medias</p>
<p>HA: Al menos una media poblacional de un grupo es diferente / Hay
diferencias entre al menos un grupo o más</p>
<p>Es decir, si se rechaza la H0, quizá todas las medias poblacionales
entre grupos sean distintas, quizá algunas o quizá solo una difiere de
las otras.</p>
<p>Esta prueba se basa en una comparación entre la variabilidad entre
(between) y la variabilidad intra (within).</p>
<p>Se concluiría que al menos una de las medias grupales sería
significativamente diferente de las otras medias grupales. El tema es
que la prueba de ANOVA llega hasta ahí, pero no nos indica qué medias
son diferentes. Para saber qué media(s) es(son) diferente(s) se tiene
que hacer un test posterior: <strong>el test de Tukey</strong>.</p>
<p>Este test sirve para analizar qué diferencias entre grupos son
significativas. Es decir, reporta todos los emparejamientos posibles
entre grupos y en cada pareja corre una prueba t de diferencia de medias
y la reporta.</p>
<p>Ojo: El test de ANOVA, al igual que la prueba t, tiene dos
requisitos:</p>
<ul>
<li>La variable numérica se comporta de manera normal</li>
<li>Existe homogeneidad de varianzas (homocedasticidad)</li>
</ul>
<p>En el caso del primer requisito, si llegara a suceder que nuestra
variable numérica no tuviera un comportamiento normal, nos apoyaremos en
el Teorema Central del Límite, que plantea que, en la medida que nuestro
marco muestral es <em>suficientemente grande</em>, la variable aleatoria
se aproxima a un comportamiento normal.</p>
<p>En el caso del segundo requisito, por objetivos prácticos del
ejercicio, asumiremos que existe homocedasticidad. Sin embargo, es
importante saber que hay a disposición test estadísticos alternativos
capaces de lidiar cuando no existe homogeneidad de varianzas, como es el
caso de la prueba T3 de Dunnet/T2 de Tamhame. En la medida que asumimos
que el segundo requisito se cumple, utilizaremos la <strong>prueba
Tukey</strong>.</p>
</div>
<div id="ejemplo-data-sobre-residuos-municipales"
class="section level1">
<h1>Ejemplo: Data sobre residuos municipales</h1>
<p>La base de datos de generación de residuos sólidos municipales
corresponde a la cantidad total de residuos sólidos generados anualmente
en los domicilios y los provenientes de las actividades económicas e
institucionales a nivel distrital. La unidad de medida es en
toneladas.</p>
<p>Los residuos sólidos municipales son aquellos provenientes del
consumo o uso de un bien o servicio, que comprenden específicamente como
fuente de generación a las viviendas, los establecimientos comerciales,
restaurantes, hoteles, mercados, instituciones públicas y privadas,
instituciones educativas y del servicio de barrido y limpieza de
espacios públicos.</p>
<p>Se puede encontrar la base de datos en la Plataforma Nacional de
Datos Abiertos:</p>
<p><a
href="https://www.datosabiertos.gob.pe/dataset/generaci%C3%B3n-anual-de-residuos-s%C3%B3lidos-municipales-0"
class="uri"><em>https://www.datosabiertos.gob.pe/dataset/generaci%C3%B3n-anual-de-residuos-s%C3%B3lidos-municipales-0</em></a></p>
<p>Veamos ahora si los promedios de toneladas de residuos sólidos
municipales difieren en más de dos grupos: Costa,Sierra y Selva, para el
año 2021:</p>
<pre class="r"><code>library(rio)
data = import(&quot;3. bd residuos municipales.csv&quot;)</code></pre>
<p>Primero, filtremos la base de datos para quedarnos con periodo
2021</p>
<pre class="r"><code>library(dplyr)
str(data$PERIODO)</code></pre>
<pre><code>##  int [1:14978] 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 ...</code></pre>
<pre class="r"><code>table(data$PERIODO)</code></pre>
<pre><code>## 
## 2014 2015 2016 2017 2018 2019 2020 2021 
## 1851 1867 1874 1874 1874 1874 1874 1890</code></pre>
<pre class="r"><code>data = data %&gt;% filter(PERIODO == 2021)</code></pre>
<p>Ahora, seleccionemos las variables con las que trabajaremos</p>
<pre class="r"><code>str(data$REG_NAT)</code></pre>
<pre><code>##  chr [1:1890] &quot;SELVA&quot; &quot;SELVA&quot; &quot;SIERRA&quot; &quot;SIERRA&quot; &quot;SIERRA&quot; &quot;SIERRA&quot; &quot;SELVA&quot; ...</code></pre>
<pre class="r"><code>table(data$REG_NAT)</code></pre>
<pre><code>## 
##  COSTA  SELVA SIERRA 
##    334    306   1250</code></pre>
<pre class="r"><code># Debido a la estructura de la variable, vamos a convertirla en categórica
data$REG_NAT = as.factor(data$REG_NAT)

str(data$REG_NAT)</code></pre>
<pre><code>##  Factor w/ 3 levels &quot;COSTA&quot;,&quot;SELVA&quot;,..: 2 2 3 3 3 3 2 3 2 2 ...</code></pre>
<pre class="r"><code>table(data$REG_NAT)</code></pre>
<pre><code>## 
##  COSTA  SELVA SIERRA 
##    334    306   1250</code></pre>
<pre class="r"><code>data_ejemplo = data %&gt;% select(REG_NAT,toneladas_residuos=QRESIDUOS_MUN)</code></pre>
</div>
<div
id="observando-diferencias-de-promedio-entre-las-toneladas-de-residuos-para-más-de-2-grupos"
class="section level1">
<h1>Observando diferencias de promedio entre las toneladas de residuos
para más de 2 grupos</h1>
<p>Hagamos una observación visual informal:</p>
<p>H0: No hay diferencia de promedio en las toneladas de residuos
generados por región natural: Costa, Sierra y Selva.</p>
<pre class="r"><code>library(lsr)
data_grafico= data_ejemplo %&gt;%                          
  group_by(REG_NAT)%&gt;%
  summarise(Desviacion = sd(toneladas_residuos, na.rm=T),
          Media = mean(toneladas_residuos, na.rm=T),
            min = ciMean(toneladas_residuos,conf = 0.95, na.rm=T)[1],
            max = ciMean(toneladas_residuos,conf = 0.95, na.rm=T)[2],
            n=length(toneladas_residuos))
            
data_grafico</code></pre>
<pre><code>## # A tibble: 3 × 6
##   REG_NAT Desviacion  Media    min    max     n
##   &lt;fct&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;
## 1 COSTA       42398. 17325. 12761. 21888.   334
## 2 SELVA        7061.  2664.  1869.  3458.   306
## 3 SIERRA       5368.  1290.   992.  1588.  1250</code></pre>
<pre class="r"><code>library(ggplot2)
ggplot(data_grafico,aes(x=REG_NAT,y=Media))+geom_errorbar(aes(ymin=min,ymax=max))+xlab(&quot;REGIÓN NATURAL&quot;)+ylab(&quot;Residuos en toneladas&quot;)+ylim(0,25000)</code></pre>
<p><img src="pd6_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Ahora, confirmemos la observación visual con la prueba ANOVA.
Obsevamos que el p-value es bastante pequeño y menor a 0.05, por lo que
podemos afirmar que existe diferencia de promedios de toneladas de
residuos según municipio por región natural: Costa, Sierra y Selva. Esto
coincide con lo reportado por el gráfico.</p>
<pre class="r"><code>anova &lt;- aov(data_ejemplo$toneladas_residuos~data_ejemplo$REG_NAT)
summary(anova)</code></pre>
<pre><code>##                        Df    Sum Sq   Mean Sq F value Pr(&gt;F)    
## data_ejemplo$REG_NAT    2 6.880e+10 3.440e+10    99.9 &lt;2e-16 ***
## Residuals            1887 6.498e+11 3.444e+08                   
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>Sin embargo, esto no nos dice cuáles son los grupos cuyos promedios
difieren estadísticamente; es decir, cuyos intervalos de confianza no se
traslapan. Para conocerlo, apliquemos la prueba Tukey:</p>
<pre class="r"><code>TukeyHSD(anova)</code></pre>
<pre><code>##   Tukey multiple comparisons of means
##     95% family-wise confidence level
## 
## Fit: aov(formula = data_ejemplo$toneladas_residuos ~ data_ejemplo$REG_NAT)
## 
## $`data_ejemplo$REG_NAT`
##                    diff        lwr        upr     p adj
## SELVA-COSTA  -14661.248 -18105.581 -11216.916 0.0000000
## SIERRA-COSTA -16034.762 -18715.772 -13353.753 0.0000000
## SIERRA-SELVA  -1373.514  -4149.633   1402.605 0.4770548</code></pre>
<p>Tenemos que observa la columna denominada <strong>p adj</strong>. Hay
que ver aquellos grupos en los que la diferencia de promedios es menor a
0.05. En este caso, la prueba Tukey nos indica que hay diferencia entre
la media de generación de toneladas de residuos entre las regiones Selva
y Costa y las regiones Sierra y Costa; en ese sentido, podemos afirmar
que la única media distinta es la de la Costa.</p>
<p>Podemos visualizar, además, las diferencias de otra forma. Aquellos
emparejamientos cuyas líneas no crucen la línea vertical del cero, se
puede decir que hay diferencias estadísticamente significativas.</p>
<pre class="r"><code>plot(TukeyHSD(anova),cex.axis=0.5)</code></pre>
<p><img src="pd6_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
